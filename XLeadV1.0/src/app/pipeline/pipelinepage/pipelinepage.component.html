
<div class="container">
    <div class="topbar">
        <h1>Pipelines</h1>
        <!-- <app-export
            [iconName]="'add'"
            [buttonText]="'Deal'"
            (click)="onAddDeal()"
        ></app-export> -->
        <button>deal</button>
    </div>
    <div class="topcard-container">
      <app-topcard 
        *ngFor="let card of topcardData"
        [amount]="card.amount" 
        [title]="card.title"
        [isCurrency]="card.isCurrency"
        [icon]="card.icon">
      </app-topcard>
    </div>
    <div class="card-container" cdkDropListGroup>
      <div
          *ngFor="let stage of stages; let i = index;"
          class="stage-card dx-card" 
          [class.collapsed]="stage.collapsed" 
          (mouseenter)="onMouseEnter(i)" 
          (mouseleave)="onMouseLeave(i)"
          (click)="toggleCollapse(i)"
      >
          <div>
              <app-dealheader [stageName]="stage.name" [amount]="stage.amount" [dealCount]="stage.deals.length" [collapsed]="stage.collapsed"></app-dealheader>
          </div>

          <div *ngIf="!stage.collapsed">
              <app-dealbody [deals]="stage.deals" [connectedTo]="connectedDropLists" [stageName]="stage.name" (dealDropped)="onDealDropped($event)"></app-dealbody>
          </div>

          <div *ngIf="stage.hover && !stage.collapsed">
              <app-dealfooter></app-dealfooter>
          </div>
      </div>
    </div>
</div>

